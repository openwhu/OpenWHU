module Timer_module
(	
	RSTn, CLK, Start, Timer_Start, a_to_g1,a_to_g2,led5,buzzer
);
	input RSTn, CLK, Start, Timer_Start;
	output reg [6:0]a_to_g1,a_to_g2;
	output reg led5,buzzer;
	reg count1=0;
	reg [3:0]o_shi,o_ge;

	 
	 /***************************
	 分频部分，产生周期为1s的时钟信号
	 ***************************/
	reg CLK1; 
	reg [24:0]count;
	parameter T1S = 25'd25000_000;		//period of CLK1 is 1 second
	always @(posedge CLK or negedge RSTn)
	begin 
		if(!RSTn)
			cnt<=0;
		else if(cnt==T1S-25'd1)
			begin
				cnt<=0;
				CLK1 <= ~CLK1;
			end
		else
			cnt=cnt+1;
	end

	 /***************************
	30s倒计时部分
	 ***************************/
	always @(posedge CLK1 or negedge RSTn or negedge Start)
	begin
		if(!RSTn||!Start)  //主持人按下RSTn键，开始新一轮抢答，倒计时置为30
			begin
				o_shi<='d3;
				o_ge<='d0;
			end
		else if(Timer_Start==1) //答题计时信号为1 ，则开始倒计时
			begin
				if(o_shi=='d0&&o_ge=='d0) //倒计时若已为0，则保持不变
					begin
						o_shi<=o_shi;
						o_ge<=o_ge;
					end
				else if(o_shi=='d3&&o_ge=='d0)
					begin
						o_shi<='d2;
						o_ge<='d9;
					end
				else if(o_shi=='d2&&o_ge=='d0)
					begin
						o_shi<='d1;
						o_ge<='d9;
					end 
				else if(o_shi=='d1&&o_ge=='d0)
					begin
						o_shi<='d0;
						o_ge<='d9;
					end
				else 
					o_ge<=o_ge-'d1;
			end
	end